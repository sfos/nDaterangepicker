/**
 * nDaterangepicker 0.1.20
 * @author Eugene Serkin
 * @license MIT License http://opensource.org/licenses/MIT
 */
"use strict";!function(a){function b(){var a=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&"function"!=typeof a[c]&&(b[c]=a[c]);return b};return{getProperties:function(b){return a(b)}}}a.module("nDaterangepicker",[]),a.module("nDaterangepicker").service("DateRangePickerLocaleService",function(){this.applyLabel="Apply",this.cancelLabel="Cancel",this.fromLabel="From",this.toLabel="To",this.weekLabel="W",this.customRangeLabel="Custom Range",this.daysOfWeek=["Su","Mo","Tu","We","Th","Fr","Sa"],this.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.firstDay=0,this.setApplyLabel=function(a){return this.applyLabel=a,this},this.getApplyLabel=function(){return this.applyLabel},this.setCancelLabel=function(a){return this.cancelLabel=a,this},this.getCancelLabel=function(){return this.cancelLabel},this.setFromLabel=function(a){return this.fromLabel=a,this},this.getFromLabel=function(){return this.fromLabel},this.setToLabel=function(a){return this.toLabel=a,this},this.getToLabel=function(){return this.toLabel},this.setWeekLabel=function(a){return this.weekLabel=a,this},this.getWeekLabel=function(){return this.weekLabel},this.setCustomRangeLabel=function(a){return this.customRangeLabel=a,this},this.getCustomRangeLabel=function(){return this.customRangeLabel},this.setDaysOfWeek=function(a){return this.daysOfWeek=a,this},this.getDaysOfWeek=function(){return this.daysOfWeek},this.setMonthNames=function(a){return this.monthNames=a,this},this.getMonthNames=function(){return this.monthNames},this.setFirstDay=function(a){return this.firstDay=a,this},this.getFirstDay=function(){return this.firstDay},this.getList=function(){return b().getProperties(this)}}),a.module("nDaterangepicker").service("DateRangePickerService",function(){this.startDate,this.endDate,this.minDate,this.maxDate,this.dateLimit=!1,this.timeZone=moment().utcOffset(),this.showDropdowns=!1,this.yearDecrement=20,this.yearIncrement=20,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerIncrement=30,this.timePicker12Hour=!1,this.timePickerSeconds=!1,this.ranges=!1,this.opens="right",this.drops="down",this.buttonClasses=["btn","btn-small btn-sm"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.formatMask="^[0-1][0-9]/[0-3][0-9]/[0-9]{4}$",this.isoFormat="YYYY-MM-DDTHH:mm:ssZ",this.separator=" - ",this.singleDatePicker=!1,this.parentEl="",this.iconBtnClasses=[],this.type="string",this.availableDateTypes=["string","date","moment"],this.setStartDate=function(a){return this.startDate=a,this},this.getStartDate=function(){return this.startDate},this.setEndDate=function(a){return this.endDate=a,this},this.getEndDate=function(){return this.endDate},this.setMinDate=function(a){return this.minDate=a,this},this.getMinDate=function(){return this.minDate},this.setMaxDate=function(a){return this.maxDate=a,this},this.getMaxDate=function(){return this.maxDate},this.setDateLimit=function(a){return this.dateLimit=a,this},this.getDateLimit=function(){return this.dateLimit},this.setTimeZone=function(a){return this.timeZone=a,this},this.getTimeZone=function(){return this.timeZone},this.setShowDropdowns=function(a){return this.showDropdowns=a,this},this.isShowDropdowns=function(){return this.showDropdowns},this.setYearDecrement=function(a){return this.yearDecrement=a,this},this.getYearDecrement=function(){return this.yearDecrement},this.setYearIncrement=function(a){return this.yearIncrement=a,this},this.getYearIncrement=function(){return this.yearIncrement},this.setShowWeekNumbers=function(a){return this.showWeekNumbers=a,this},this.isShowWeekNumbers=function(){return this.showWeekNumbers},this.setTimePicker=function(a){return this.timePicker=a,this},this.isTimePicker=function(){return this.timePicker},this.setTimePickerIncrement=function(a){return this.timePickerIncrement=a,this},this.getTimePickerIncrement=function(){return this.timePickerIncrement},this.setTimePicker12Hour=function(a){return this.timePicker12Hour=a,this},this.isTimePicker12Hour=function(){return this.timePicker12Hour},this.setTimePickerSeconds=function(a){return this.timePickerSeconds=a,this},this.isTimePickerSeconds=function(){return this.timePickerSeconds},this.addRange=function(a,b){return this.ranges[a]=b,this},this.setRanges=function(a){return this.ranges=a,this},this.getRanges=function(){return this.ranges},this.setOpens=function(a){return this.opens=a,this},this.getOpens=function(){return this.opens},this.setDrops=function(a){return this.drops=a,this},this.getDrops=function(){return this.drops},this.addButtonClass=function(a){return this.buttonClasses.push(a),this},this.setButtonClasses=function(a){return this.buttonClasses=a,this},this.getButtonClasses=function(){return this.buttonClasses},this.setApplyBtnClass=function(a){return this.applyClass=a,this},this.getApplyBtnClass=function(){return this.applyClass},this.setCancelBtnClass=function(a){return this.cancelClass=a,this},this.getCancelBtnClass=function(){return this.cancelClass},this.setFormat=function(b){return this.format=a.uppercase(b),this},this.getFormat=function(){return this.format},this.setFormatMask=function(a){return this.formatMask=a,this},this.getFormatMask=function(){return this.formatMask},this.setSeparator=function(a){return this.separator=a,this},this.getSeparator=function(){return this.separator},this.setParentEl=function(a){return this.parentEl=a,this},this.getParentEl=function(){return this.parentEl},this.addIconBtnClass=function(a){return this.iconBtnClasses.push(a),this},this.setIconBtnClasses=function(a){return this.iconBtnClasses=a,this},this.getIconBtnClasses=function(){return this.iconBtnClasses},this.setType=function(a){return this.isValidDateType(a)&&(this.type=a),this},this.isValidDateType=function(a){if(-1==this.availableDateTypes.indexOf(a))throw new TypeError("Got type ("+a+") and expected one of the following ("+this.availableDateTypes.join(",")+")");return!0},this.getType=function(){return this.type},this.getList=function(){return b().getProperties(this)}}),a.module("nDaterangepicker").directive("dateRangePicker",["$timeout","DateRangePickerService","DateRangePickerLocaleService","$log",function(b,c,d,e){return{restrict:"A",require:"^ngModel",scope:{options:"@"},controller:["$scope","$parse",function(b,e){var f=a.extend({},d.getList());b.options&&(b.options=e(b.options)()),b.options&&b.options.locale&&(f=a.extend(f,b.options.locale),delete b.options.locale),b.internalOptions=a.extend({},c.getList(),{locale:f},b.options),c.isValidDateType(b.internalOptions.type)}],link:function(c,d,e,f){function g(b,d){if(a.isUndefined(d)||""===d||a.isUndefined(b)||null===b)return!0;var e=d.replace(/^"|"$/g,""),f=moment(e,c.internalOptions.format);if(f.isValid()||(f=moment(e,c.internalOptions.isoFormat)),f.isValid()||(f=moment(new Date(e))),!f.isValid())throw new Error('Passed in comparison model for "minDateLimit" validator is invalid!');var g=v(b),h=v(g.format(c.internalOptions.format)),i=v(f.format(c.internalOptions.format));return h.isAfter(i)||h.isSame(i)}function h(b,d){if(a.isUndefined(d)||""===d||a.isUndefined(b)||null===b)return!0;var e=d.replace(/^"|"$/g,""),f=moment(e,c.internalOptions.format);if(f.isValid()||(f=moment(e,c.internalOptions.isoFormat)),f.isValid()||(f=moment(new Date(e))),!f.isValid())throw new Error('Passed in comparison model for "maxDate" validator is invalid!');var g=v(b),h=v(g.format(c.internalOptions.format)),i=v(f.format(c.internalOptions.format));return h.isBefore(i)||h.isSame(i)}function i(b,c,d){a.isUndefined(i.eventHolder)&&(i.eventHolder=[]),b.on(c,d),i.eventHolder.push({el:b,event:c,handler:d})}function j(){a.isArray(i.eventHolder)&&(i.eventHolder.forEach(function(a){a.el.off(a.event,a.handler)}),i.eventHolder.length=0)}function k(b){a.isUndefined(k.destructors)&&(k.destructors=[]),k.destructors.push(b)}function l(){a.isArray(k.destructors)&&k.destructors.forEach(function(a){a()}),k.destructors.length=0}function m(){j(),l()}var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=a.element(d);c.options&&c.options.identifier&&c.$on(c.options.identifier+"Reset",function(){return s()}),f.$formatters.push(function(b){return a.isUndefined(o())?(q(b),n(b),B(b)?"":b):b}),f.$parsers.push(function(b){return null===b||!moment.isMoment(b)&&0==b.length?(D=null,null):C(b)?(E=void 0,D=b,c.internalOptions.singleDatePicker?(t(b,b),w(b)):w(a.isObject(b)&&b.hasOwnProperty("startDate")&&b.hasOwnProperty("endDate")?b:f.$modelValue)):(E=b,F=b,B(D)?null:w(D))}),f.$validators.dateRequired=function(b){if(a.isUndefined(e.dateRequired))return f.$setValidity("required",!0),!0;var c=!B(b);return f.$setValidity("required",c),c};var I=function(b,d){if(a.isUndefined(d)||""===d)return!0;if(a.isUndefined(b)||null===b)return!0;var e=d.replace(/^"|"$/g,""),f=moment(e,c.internalOptions.format);if(f.isValid()||(f=moment(e,c.internalOptions.isoFormat)),f.isValid()||(f=moment(new Date(e))),!f.isValid())throw new Error('Passed in comparison model for "notLaterThan" validator is invalid!');var g=v(b),h=v(g.format(c.internalOptions.format)),i=v(f.format(c.internalOptions.format));return h.isBefore(i)||h.isSame(i)};c.$watch(function(){return e.notLaterThan},function(a){f.$setValidity("notLaterThan",I(f.$modelValue,a))}),f.$validators.notLaterThan=function(a){return I(a,e.notLaterThan)};var J=function(b,d){if(a.isUndefined(d)||""===d)return!0;if(a.isUndefined(b)||null===b)return!0;var e=d.replace(/^"|"$/g,""),f=moment(e,c.internalOptions.format);if(f.isValid()||(f=moment(e,c.internalOptions.isoFormat)),f.isValid()||(f=moment(new Date(e))),!f.isValid())throw new Error('Passed in comparison model for "notEarlierThan" validator is invalid!');var g=v(b),h=v(g.format(c.internalOptions.format)),i=v(f.format(c.internalOptions.format));return h.isAfter(i)||h.isSame(i)};c.$watch(function(){return e.notEarlierThan},function(a){f.$setValidity("notEarlierThan",J(f.$modelValue,a))}),f.$validators.notEarlierThan=function(a){return J(a,e.notEarlierThan)},e.$observe("minDateLimit",function(a){f.$setValidity("minDateLimit",g(f.$modelValue,a))}),f.$validators.minDateLimit=function(a,b){return g(a,e.minDateLimit)},e.$observe("maxDateLimit",function(a){f.$setValidity("maxDateLimit",h(f.$modelValue,a))}),f.$validators.maxDateLimit=function(a,b){return h(a,e.maxDateLimit)},f.$isEmpty=function(a){return B(a)},f.$render=function(){return C(E)?f.$modelValue&&null!==f.$modelValue.startDate?(y(f.$modelValue),H.val(u(f.$modelValue))):H.val(""):H.val("blur"!==G?E:function(){return moment.isMoment(D)?D.format(c.internalOptions.format):C(D)?D:""})},n=function(d){if(!c.internalOptions.singleDatePicker)throw new Error("Currently only single datepicker is supported!");if(B(d)||(c.internalOptions.singleDatePicker?(c.internalOptions.startDate=d,c.internalOptions.endDate=d):(c.internalOptions.startDate=d.startDate,c.internalOptions.endDate=d.endDate)),H.daterangepicker(c.internalOptions,function(d,e){return b(function(){return c.$apply(function(){var b=a.isDefined(F)&&F.length>0?moment(F,c.internalOptions.format):void 0;return moment.isMoment(d)&&d.isValid()&&moment.isMoment(e)&&e.isValid()&&(a.isUndefined(b)||b&&d.diff(b))&&p(d,e),f.$render()})})}),k(function(){H.data("daterangepicker")&&H.data("daterangepicker").remove()}),"dynamic"===c.internalOptions.drops){var e=function(a,b){return a.offset().top+a.outerHeight()+b.outerHeight()<=$(window).height()+$(window).scrollTop()},g=o(),h=g.move;g.move=function(){g.drops=e(H,g.container)?"down":"up",h.call(g)}}},o=function(){return H.data("daterangepicker")},p=function(a,b){c.internalOptions.singleDatePicker?f.$setViewValue(null!==a?w(a):null):f.$setViewValue({startDate:null!==a?w(a):null,endDate:null!==b?w(b):null})},q=function(a){c.internalOptions.singleDatePicker=!a||!a.hasOwnProperty("startDate")&&!a.hasOwnProperty("endDate")},r=function(){var a=o(),b=x(),d=v(b.format(c.internalOptions.format));a.setEndDate(d),a.setStartDate(d)},s=function(){return b(function(){return c.$apply(function(){return r(),p(null,null),f.$render()})})},t=function(a,b){var c=o(),d=v(a),e=v(b);if(!d.isValid())throw new Error("Either invalid startDate was passed or invalid format. Please check!");if(!e.isValid())throw new Error("Either invalid endDate was passed or invalid format. Please check!");c.setEndDate(e),c.setStartDate(d)},u=function(a){var b=function(a){return v(a).format(c.internalOptions.format)};return c.internalOptions.singleDatePicker?b(a):[b(a.startDate),b(a.endDate)].join(c.internalOptions.separator)},v=function(a){if(moment.isMoment(a))return a;return a instanceof Date?moment(a):moment(a,c.internalOptions.format)},w=function(a){var b=v(a);switch(c.internalOptions.type){case"moment":return b;case"date":return b.toDate();default:case"string":return b.format(c.internalOptions.format)}},x=function(){var a=moment(),b=c.internalOptions.maxDate,d=c.internalOptions.minDate;return b&&a.isAfter(v(b))?v(b):d&&a.isBefore(v(d))?v(d):a},y=function(b){var d=a.isDefined(b.startDate)?b.startDate:b,e=a.isDefined(b.endDate)?b.endDate:b;c.internalOptions.minDate&&d?z(c.internalOptions.minDate,d):f.$setValidity("minDate",!0),c.internalOptions.maxDate&&e?A(c.internalOptions.maxDate,e):f.$setValidity("maxDate",!0)},z=function(a,b){var c;return a=v(a),b=v(b),c=a.isBefore(b)||a.isSame(b,"day"),f.$setValidity("minDate",c),c},A=function(a,b){var c;return a=v(a),b=v(b),c=a.isAfter(b)||a.isSame(b,"day"),f.$setValidity("maxDate",c),c},B=function(b){return a.isUndefined(b)||null===b||0==b.length||null===b.startDate||null===b.endDate},C=function(b){return!!a.isUndefined(b)||(moment.isMoment(b)&&(b=b.format(c.internalOptions.format)),new RegExp(c.internalOptions.formatMask,"g").test(b)&&v(b).isValid())},i(H,"apply.daterangepicker",function(a,d){return G=a.type,b(function(){return c.$apply(function(){var a=w(d.startDate);moment.isMoment(a)&&(a._isUTC=!1,delete a._offset);var b=w(d.endDate);return moment.isMoment(b)&&(b._isUTC=!1,delete b._offset),p(a,b),f.$render()})})}),i(H,"keydown",function(a){G=a.type,27==a.keyCode&&(o().hide(),H.trigger("blur"))}),i(H,"focus",function(a){G=a.type,E=void 0,(null===f.$modelValue||C(f.$modelValue))&&(D=f.$modelValue)}),i(H,"blur",function(b){if(G=b.type,!(a.element(".daterangepicker.show-calendar:visible").length>0&&null===D))return null===D?s():void(C(E)||null===D||t(D,D))}),i(H,"keyup.daterangepicker",function(a){a=a||window.event,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,a.stopImmediatePropagation()}),i(a.element(document),"click",function(b){var c,d=a.element(b.target),e=d.closest("table");a.isDefined(e)&&e.length&&(c=e.parent()),"blur"===G&&(a.isUndefined(c)||c&&!c.hasClass("calendar-date"))&&a.isDefined(o())&&o().hide()}),c.$on("$destroy",m)}}}]),a.module("nDaterangepicker").directive("shorthandDateRangePicker",["$log",function(a){return a.warn("shorthandDateRangePicker directive might not work as expected!"),{restrict:"E",scope:{identifier:"@",name:"@",withBtn:"@",resetable:"@",model:"=",options:"@"},template:function(a,b){var c='<input type="text" id="{{identifier}}" class="form-control" name="{{name}}" ng-model="model" options="options" date-range-picker />';return c="true"==b.withBtn?'<div class="input-group date-range-picker">'+c+'<span class="input-group-btn"><label type="button" class="btn btn-default date" for="{{identifier}}"><i class="glyphicon glyphicon-calendar fa fa-calendar"></i></label></span>':'<div class="date-range-picker">'+c,"true"==b.resetable&&(c+='<div class="input-group"><button type="button" class="btn btn-link" title="Reset" ng-click="reset()" ng-show="model.startDate != null">Reset</button></div>'),c+="</div>"},link:function(a){a.reset=function(){a.$broadcast(a.identifier+"Reset")}}}}])}(angular);